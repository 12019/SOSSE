<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>SOSSE: t0.h File Reference</title>
<link href="sos.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<h1>t0.h File Reference</h1>  </div>
</div>
<div class="contents">

<p>T=0 declarations.  
<a href="#_details">More...</a></p>

<p><a href="t0_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="t0_8h.html#a66185e38e65e9a6578930f13601b20b8">t0_sendAck</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Send ACK byte.  <a href="#a66185e38e65e9a6578930f13601b20b8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="t0_8h.html#a88c4c061649e7862b87be5ee05443c61">t0_sendCAck</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Send complemented ACK byte.  <a href="#a88c4c061649e7862b87be5ee05443c61"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="t0_8h.html#a08bf4056ff75f0ac8fc01cafc51a7c9d">t0_sendSw</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Send word in sw.  <a href="#a08bf4056ff75f0ac8fc01cafc51a7c9d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="t0_8h.html#adab516e464f021b20d67bf25e1032301">t0_sendWord</a> (<a class="el" href="types_8h.html#af78b002cffb8a135ab10841bc49e3e14">iu16</a> w)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Send word.  <a href="#adab516e464f021b20d67bf25e1032301"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="t0_8h.html#a5419cbdf36cc2942a04070ec60486346">t0_recBlock</a> (<a class="el" href="types_8h.html#a95a7dea5cbac1a117a50dccc69944d6e">iu8</a> *<a class="el" href="log_8c.html#a3c30da82b7bc91b5520d2fb84ffeb4dd">dst</a>, <a class="el" href="types_8h.html#a95a7dea5cbac1a117a50dccc69944d6e">iu8</a> len)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Receive mutiple bytes.  <a href="#a5419cbdf36cc2942a04070ec60486346"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="types_8h.html#a97a80ca1602ebf2303258971a2c938e2">bool</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="t0_8h.html#a0a5fec56b63d21ea44278bd8b3c151c3">t0_testP1P2</a> (<a class="el" href="types_8h.html#af78b002cffb8a135ab10841bc49e3e14">iu16</a> p1p2)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Test P1P2 for correct content.  <a href="#a0a5fec56b63d21ea44278bd8b3c151c3"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="types_8h.html#a97a80ca1602ebf2303258971a2c938e2">bool</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="t0_8h.html#a4fb7c1ea98c7bb6a8d85bad1ad79f36c">t0_testP3</a> (<a class="el" href="types_8h.html#a95a7dea5cbac1a117a50dccc69944d6e">iu8</a> p3)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Test P3 for correct content.  <a href="#a4fb7c1ea98c7bb6a8d85bad1ad79f36c"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="var-members"></a>
Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="types_8h.html#a95a7dea5cbac1a117a50dccc69944d6e">iu8</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="t0_8h.html#a309a16173373bae33919e7c0f13732b5">header</a> [5]</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Header of the current command.  <a href="#a309a16173373bae33919e7c0f13732b5"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>T=0 declarations. </p>
<p>T=0 is not implemented fully as library, but must be partly done in the commands itself. This reduces the RAM requirements. E.g. when doing an Update Binary the data must not be received in total before writing, but can be received and written in single bytes.</p>
<dl class="rcs"><dt><b>Id:</b></dt><dd><a class="el" href="t0_8h.html" title="T=0 declarations.">t0.h</a>,v 1.12 2002/12/22 15:42:55 m Exp </dd></dl>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a5419cbdf36cc2942a04070ec60486346"></a><!-- doxytag: member="t0.h::t0_recBlock" ref="a5419cbdf36cc2942a04070ec60486346" args="(iu8 *dst, iu8 len)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void t0_recBlock </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="types_8h.html#a95a7dea5cbac1a117a50dccc69944d6e">iu8</a> *&nbsp;</td>
          <td class="paramname"> <em>dst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="types_8h.html#a95a7dea5cbac1a117a50dccc69944d6e">iu8</a>&nbsp;</td>
          <td class="paramname"> <em>len</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Receive mutiple bytes. </p>
<p>Receive <em>len</em> bytes and write them to <em>dst</em>.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>dst</em>&nbsp;</td><td>Pointer to destination area in RAM. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>len</em>&nbsp;</td><td>Data bytes to receive. </td></tr>
  </table>
  </dd>
</dl>

<p>References <a class="el" href="hal-emu_8c.html#a6f2a2f946cf90cb7bd613f2c3ada355c">hal_io_recByteT0()</a>.</p>

<p>Referenced by <a class="el" href="commands_8h.html#aece92ed730ad9d4e7ccb4cd08555c0b7">cmd_changeUnblockPIN()</a>, <a class="el" href="commands_8h.html#a3c4d6ec9b132006edab635f42f6b1143">cmd_create()</a>, <a class="el" href="commands_8h.html#a6479b741d6f5b343e356290db8153021">cmd_extAuth()</a>, <a class="el" href="commands_8h.html#ad18d7d2bb0f030accf5e0456b2927411">cmd_intAuth()</a>, and <a class="el" href="commands_8h.html#a8483dd469cbec8917e02d57f1059ef9c">cmd_verifyKeyPIN()</a>.</p>

</div>
</div>
<a class="anchor" id="a66185e38e65e9a6578930f13601b20b8"></a><!-- doxytag: member="t0.h::t0_sendAck" ref="a66185e38e65e9a6578930f13601b20b8" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void t0_sendAck </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Send ACK byte. </p>
<p>Sends the for the current command correct ACK byte to the terminal. </p>

<p>References <a class="el" href="hal-emu_8c.html#a50f4270db8dcf34e7e98f1e2b43d1135">hal_io_sendByteT0()</a>, and <a class="el" href="t0_8c.html#a309a16173373bae33919e7c0f13732b5">header</a>.</p>

<p>Referenced by <a class="el" href="commands_8h.html#aece92ed730ad9d4e7ccb4cd08555c0b7">cmd_changeUnblockPIN()</a>, <a class="el" href="commands_8h.html#a3c4d6ec9b132006edab635f42f6b1143">cmd_create()</a>, <a class="el" href="commands_8h.html#ab5e91199098e25652dd3dbc7aea27683">cmd_delete()</a>, <a class="el" href="commands_8h.html#a6479b741d6f5b343e356290db8153021">cmd_extAuth()</a>, <a class="el" href="commands_8h.html#a6feeac5b3883560af0faec05f1a090b2">cmd_getChallenge()</a>, <a class="el" href="commands_8h.html#a7002865ca7ee8fef5c52493a90809e48">cmd_getResponse()</a>, <a class="el" href="commands_8h.html#ad18d7d2bb0f030accf5e0456b2927411">cmd_intAuth()</a>, <a class="el" href="commands_8h.html#a18edf53f42c45ade3a6a886e5db0df5c">cmd_read()</a>, <a class="el" href="commands_8h.html#a892cbb2f7983a3bca95719fa78397eb4">cmd_readBinary()</a>, <a class="el" href="commands_8h.html#a338c589b70e1e97960452b9f7b124c46">cmd_select()</a>, and <a class="el" href="commands_8h.html#a8483dd469cbec8917e02d57f1059ef9c">cmd_verifyKeyPIN()</a>.</p>

</div>
</div>
<a class="anchor" id="a88c4c061649e7862b87be5ee05443c61"></a><!-- doxytag: member="t0.h::t0_sendCAck" ref="a88c4c061649e7862b87be5ee05443c61" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void t0_sendCAck </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Send complemented ACK byte. </p>
<p>Sends the for the current command correct complemented ACK byte to the terminal. </p>

<p>References <a class="el" href="hal-emu_8c.html#a50f4270db8dcf34e7e98f1e2b43d1135">hal_io_sendByteT0()</a>, and <a class="el" href="t0_8c.html#a309a16173373bae33919e7c0f13732b5">header</a>.</p>

<p>Referenced by <a class="el" href="commands_8h.html#aa4f0817c641ea482d8bbd9a62d4a56b5">cmd_updateBinary()</a>, and <a class="el" href="commands_8h.html#a6bf9e78c68d51c4b10b884a13fc32aa4">cmd_write()</a>.</p>

</div>
</div>
<a class="anchor" id="a08bf4056ff75f0ac8fc01cafc51a7c9d"></a><!-- doxytag: member="t0.h::t0_sendSw" ref="a08bf4056ff75f0ac8fc01cafc51a7c9d" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void t0_sendSw </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Send word in sw. </p>
<p>Sends the word in sw the the terminal. This is used to return the status word at the end of the command interpreter loop in <a class="el" href="authtest_8c.html#a0ddf1224851353fc92bfbff6f499fa97">main()</a>. </p>

<p>References <a class="el" href="hal-emu_8c.html#a50f4270db8dcf34e7e98f1e2b43d1135">hal_io_sendByteT0()</a>, and <a class="el" href="sw_8c.html#a814d554b939d5196ce21afb6562e0a05">sw</a>.</p>

<p>Referenced by <a class="el" href="main_8c.html#a840291bc02cba5474a4cb46a9b9566fe">main()</a>.</p>

</div>
</div>
<a class="anchor" id="adab516e464f021b20d67bf25e1032301"></a><!-- doxytag: member="t0.h::t0_sendWord" ref="adab516e464f021b20d67bf25e1032301" args="(iu16 w)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void t0_sendWord </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="types_8h.html#af78b002cffb8a135ab10841bc49e3e14">iu16</a>&nbsp;</td>
          <td class="paramname"> <em>w</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Send word. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>w</em>&nbsp;</td><td>Word to send. </td></tr>
  </table>
  </dd>
</dl>

<p>References <a class="el" href="hal-emu_8c.html#a50f4270db8dcf34e7e98f1e2b43d1135">hal_io_sendByteT0()</a>.</p>

<p>Referenced by <a class="el" href="main_8c.html#a840291bc02cba5474a4cb46a9b9566fe">main()</a>.</p>

</div>
</div>
<a class="anchor" id="a0a5fec56b63d21ea44278bd8b3c151c3"></a><!-- doxytag: member="t0.h::t0_testP1P2" ref="a0a5fec56b63d21ea44278bd8b3c151c3" args="(iu16 p1p2)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="types_8h.html#a97a80ca1602ebf2303258971a2c938e2">bool</a> t0_testP1P2 </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="types_8h.html#af78b002cffb8a135ab10841bc49e3e14">iu16</a>&nbsp;</td>
          <td class="paramname"> <em>p1p2</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Test P1P2 for correct content. </p>
<p>Compares the values of P1 and P2 in <em>header</em> to <em>p1p2</em>. If they differ, sw is set to SW_WRONG_P1P2 and FALSE is returned.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>p1p2</em>&nbsp;</td><td>Target value of P1P2.</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>TRUE</em>&nbsp;</td><td>on success. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>FALSE</em>&nbsp;</td><td>on failure. Error code given in sw. </td></tr>
  </table>
  </dd>
</dl>

<p>References <a class="el" href="t0_8c.html#a309a16173373bae33919e7c0f13732b5">header</a>, <a class="el" href="sw_8c.html#a06244878ad482424dc04d05cfdc81b7b">sw_set()</a>, and <a class="el" href="sw_8h.html#ac5377a40197386a6b59fbf99128e0c16ab8a4f0612888f76b681332ebd272dfa4">SW_WRONG_P1P2</a>.</p>

<p>Referenced by <a class="el" href="commands_8h.html#aece92ed730ad9d4e7ccb4cd08555c0b7">cmd_changeUnblockPIN()</a>, <a class="el" href="commands_8h.html#a3c4d6ec9b132006edab635f42f6b1143">cmd_create()</a>, <a class="el" href="commands_8h.html#ab5e91199098e25652dd3dbc7aea27683">cmd_delete()</a>, <a class="el" href="commands_8h.html#a6479b741d6f5b343e356290db8153021">cmd_extAuth()</a>, <a class="el" href="commands_8h.html#a6feeac5b3883560af0faec05f1a090b2">cmd_getChallenge()</a>, <a class="el" href="commands_8h.html#a7002865ca7ee8fef5c52493a90809e48">cmd_getResponse()</a>, <a class="el" href="commands_8h.html#ad18d7d2bb0f030accf5e0456b2927411">cmd_intAuth()</a>, <a class="el" href="commands_8h.html#a338c589b70e1e97960452b9f7b124c46">cmd_select()</a>, and <a class="el" href="commands_8h.html#a8483dd469cbec8917e02d57f1059ef9c">cmd_verifyKeyPIN()</a>.</p>

</div>
</div>
<a class="anchor" id="a4fb7c1ea98c7bb6a8d85bad1ad79f36c"></a><!-- doxytag: member="t0.h::t0_testP3" ref="a4fb7c1ea98c7bb6a8d85bad1ad79f36c" args="(iu8 p3)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="types_8h.html#a97a80ca1602ebf2303258971a2c938e2">bool</a> t0_testP3 </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="types_8h.html#a95a7dea5cbac1a117a50dccc69944d6e">iu8</a>&nbsp;</td>
          <td class="paramname"> <em>p3</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Test P3 for correct content. </p>
<p>Compares the value of P3 in <em>header</em> to <em>p3</em>. If they differ, sw is set to SW_WRONG_P1P2 and FALSE is returned.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>p3</em>&nbsp;</td><td>Target value of P3.</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>TRUE</em>&nbsp;</td><td>on success. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>FALSE</em>&nbsp;</td><td>on failure. Error code given in sw. </td></tr>
  </table>
  </dd>
</dl>

<p>References <a class="el" href="t0_8c.html#a309a16173373bae33919e7c0f13732b5">header</a>, <a class="el" href="sw_8c.html#a06244878ad482424dc04d05cfdc81b7b">sw_set()</a>, and <a class="el" href="sw_8h.html#ac5377a40197386a6b59fbf99128e0c16a8912359f8b7011f6e0bef47a566ef759">SW_WRONG_LEN</a>.</p>

<p>Referenced by <a class="el" href="commands_8h.html#aece92ed730ad9d4e7ccb4cd08555c0b7">cmd_changeUnblockPIN()</a>, <a class="el" href="commands_8h.html#a3c4d6ec9b132006edab635f42f6b1143">cmd_create()</a>, <a class="el" href="commands_8h.html#ab5e91199098e25652dd3dbc7aea27683">cmd_delete()</a>, <a class="el" href="commands_8h.html#a6479b741d6f5b343e356290db8153021">cmd_extAuth()</a>, <a class="el" href="commands_8h.html#a6feeac5b3883560af0faec05f1a090b2">cmd_getChallenge()</a>, <a class="el" href="commands_8h.html#a7002865ca7ee8fef5c52493a90809e48">cmd_getResponse()</a>, <a class="el" href="commands_8h.html#ad18d7d2bb0f030accf5e0456b2927411">cmd_intAuth()</a>, <a class="el" href="commands_8h.html#a338c589b70e1e97960452b9f7b124c46">cmd_select()</a>, <a class="el" href="commands_8h.html#aa4f0817c641ea482d8bbd9a62d4a56b5">cmd_updateBinary()</a>, <a class="el" href="commands_8h.html#a8483dd469cbec8917e02d57f1059ef9c">cmd_verifyKeyPIN()</a>, and <a class="el" href="commands_8h.html#a6bf9e78c68d51c4b10b884a13fc32aa4">cmd_write()</a>.</p>

</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="a309a16173373bae33919e7c0f13732b5"></a><!-- doxytag: member="t0.h::header" ref="a309a16173373bae33919e7c0f13732b5" args="[5]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="types_8h.html#a95a7dea5cbac1a117a50dccc69944d6e">iu8</a> <a class="el" href="t0_8h.html#a309a16173373bae33919e7c0f13732b5">header</a>[5]</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Header of the current command. </p>
<p>This global variable contains the header (CLA INS P1 P2 P3) of the current command. It is fetched in the command interpreter loop in <a class="el" href="authtest_8c.html#a0ddf1224851353fc92bfbff6f499fa97">main()</a>. </p>

<p>Referenced by <a class="el" href="commands_8h.html#a18edf53f42c45ade3a6a886e5db0df5c">cmd_read()</a>, <a class="el" href="commands_8h.html#a6bf9e78c68d51c4b10b884a13fc32aa4">cmd_write()</a>, <a class="el" href="main_8c.html#a840291bc02cba5474a4cb46a9b9566fe">main()</a>, <a class="el" href="t0_8h.html#a66185e38e65e9a6578930f13601b20b8">t0_sendAck()</a>, <a class="el" href="t0_8h.html#a88c4c061649e7862b87be5ee05443c61">t0_sendCAck()</a>, <a class="el" href="t0_8h.html#a0a5fec56b63d21ea44278bd8b3c151c3">t0_testP1P2()</a>, and <a class="el" href="t0_8h.html#a4fb7c1ea98c7bb6a8d85bad1ad79f36c">t0_testP3()</a>.</p>

</div>
</div>
</div>
<hr><address><small>
Copyright 2002 by Matthias Bruestle. This is licensed under the GNU
General Public License.
</small></address>
</body>
</html>
